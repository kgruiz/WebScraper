<main>
       <!-- Page table of contents -->
       <div class="sidetoc">
        <nav class="pagetoc">
        </nav>
       </div>
       <h1 id="labels">
        <a class="header" href="#labels">
         Labels
        </a>
       </h1>
       <h2 id="get-chapter-of-label">
        <a class="header" href="#get-chapter-of-label">
         Get chapter of label
        </a>
       </h2>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#let ref-heading</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label</span><span style="color:#657b83;">) </span><span style="color:#859900;">=</span><span style="color:var(--fg);"> context </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">let</span><span style="color:var(--fg);"> elems </span><span style="color:#859900;">= query</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">if</span><span style="color:var(--fg);"> elems.</span><span style="color:#859900;">len</span><span style="color:#657b83;">()</span><span style="color:var(--fg);"> !</span><span style="color:#859900;">= </span><span style="color:#6c71c4;">1 </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">    </span><span style="color:#859900;">panic</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">found multiple elements</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">  </span><span style="color:#657b83;">}
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">let</span><span style="color:var(--fg);"> element </span><span style="color:#859900;">=</span><span style="color:var(--fg);"> elems.</span><span style="color:#859900;">first</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">if</span><span style="color:var(--fg);"> element.</span><span style="color:#859900;">func</span><span style="color:#657b83;">()</span><span style="color:var(--fg);"> !</span><span style="color:#859900;">=</span><span style="color:var(--fg);"> heading </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">    </span><span style="color:#859900;">panic</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">label must target heading</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">  </span><span style="color:#657b83;">}
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">link</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label, element.body</span><span style="color:#657b83;">)
</span><span style="color:#657b83;">}
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Design </span><span style="color:#93a1a1;">&lt;</span><span style="color:#b58900;">design</span><span style="color:#93a1a1;">&gt;
</span><span style="color:#b58900;">#lorem</span><span style="color:#657b83;">(</span><span style="color:#6c71c4;">20</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Implementation
</span><span style="color:var(--fg);">In </span><span style="color:#b58900;">#ref-heading</span><span style="color:#657b83;">(</span><span style="color:#93a1a1;">&lt;</span><span style="color:#b58900;">design</span><span style="color:#93a1a1;">&gt;</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">, we discussed</span><span style="color:#cb4b16;">...</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/7a4a9436d9aa0cbf0d3212b45d54bd90a896181c30b036326d99dee9f58eb117-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <h2 id="allow-missing-references">
        <a class="header" href="#allow-missing-references">
         Allow missing references
        </a>
       </h2>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#586e75;">// author: Enivex
</span><span style="color:#859900;">#set heading</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">numbering</span><span style="color:var(--fg);">: </span><span style="color:#839496;">"</span><span style="color:#2aa198;">1.</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#859900;">#let myref</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label</span><span style="color:#657b83;">) </span><span style="color:#859900;">=</span><span style="color:var(--fg);"> context </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">    </span><span style="color:#859900;">if query</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">len</span><span style="color:#657b83;">()</span><span style="color:var(--fg);"> !</span><span style="color:#859900;">= </span><span style="color:#6c71c4;">0 </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">        </span><span style="color:#859900;">ref</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">label</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">    </span><span style="color:#657b83;">} </span><span style="color:#859900;">else </span><span style="color:#657b83;">{
</span><span style="color:var(--fg);">        </span><span style="color:#586e75;">// missing reference
</span><span style="color:var(--fg);">        </span><span style="color:#859900;">text</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">fill</span><span style="color:var(--fg);">: red</span><span style="color:#657b83;">)[</span><span style="color:var(--fg);">???</span><span style="color:#657b83;">]
</span><span style="color:var(--fg);">    </span><span style="color:#657b83;">}
</span><span style="color:#657b83;">}
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Second </span><span style="color:#93a1a1;">&lt;</span><span style="color:#b58900;">test2</span><span style="color:#93a1a1;">&gt;
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#myref</span><span style="color:#657b83;">(</span><span style="color:#93a1a1;">&lt;</span><span style="color:#b58900;">test</span><span style="color:#93a1a1;">&gt;</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#myref</span><span style="color:#657b83;">(</span><span style="color:#93a1a1;">&lt;</span><span style="color:#b58900;">test2</span><span style="color:#93a1a1;">&gt;</span><span style="color:#657b83;">)</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/cd5f1f34e81c117063da3bb176c1dda726bbc18ac981121f75555d5834b08058-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
      </main>