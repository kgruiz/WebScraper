<main>
       <!-- Page table of contents -->
       <div class="sidetoc">
        <nav class="pagetoc">
        </nav>
       </div>
       <h1 id="counters">
        <a class="header" href="#counters">
         Counters
        </a>
       </h1>
       <div class="warning">
        This section is outdated. It may be still useful, but it is strongly recommended to study new context system (using the reference).
       </div>
       <p>
        Counters are special states that
        <em>
         count
        </em>
        elements of some type.
As with states, you can create your own with identifier strings.
       </p>
       <p>
        <em>
         Important:
        </em>
        to initiate counters of elements, you need to
        <em>
         set numbering for them
        </em>
        .
       </p>
       <h2 id="states-methods">
        <a class="header" href="#states-methods">
         States methods
        </a>
       </h2>
       <p>
        Counters are states, so they can do all things states can do.
       </p>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#set heading</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">numbering</span><span style="color:var(--fg);">: </span><span style="color:#839496;">"</span><span style="color:#2aa198;">1.</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Background
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">update</span><span style="color:#657b83;">(</span><span style="color:#6c71c4;">3</span><span style="color:#657b83;">)
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">update</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">n </span><span style="color:#859900;">=&gt;</span><span style="color:var(--fg);"> n </span><span style="color:#859900;">* </span><span style="color:#6c71c4;">2</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">== </span><span style="color:#cb4b16;">Analysis
</span><span style="color:var(--fg);">Current heading number: </span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">()</span><span style="color:var(--fg);">.</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/c57c9907a5f238f0b5eee74f8c23c57a5e2d5b0c9cbf7ebd1befdfcbd33289df-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#let</span><span style="color:var(--fg);"> mine </span><span style="color:#859900;">= counter</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">mycounter</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:#b58900;">#mine.display</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#mine.step</span><span style="color:#657b83;">()
</span><span style="color:#b58900;">#mine.display</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#mine.update</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">c </span><span style="color:#859900;">=&gt;</span><span style="color:var(--fg);"> c </span><span style="color:#859900;">* </span><span style="color:#6c71c4;">3</span><span style="color:#657b83;">)
</span><span style="color:#b58900;">#mine.display</span><span style="color:#657b83;">()</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/876103777c9564f0bb524f83a988a6d444c4e889baed31ee960548d90f3233e2-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <h2 id="displaying-counters">
        <a class="header" href="#displaying-counters">
         Displaying counters
        </a>
       </h2>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#set heading</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">numbering</span><span style="color:var(--fg);">: </span><span style="color:#839496;">"</span><span style="color:#2aa198;">1.</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Introduction
</span><span style="color:var(--fg);">Some text here.
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Background
</span><span style="color:var(--fg);">The current value is:
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">
</span><span style="color:var(--fg);">Or in roman numerals:
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">I</span><span style="color:#839496;">"</span><span style="color:#657b83;">)</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/1ac65f4be42131b3cca1d7c56c6c60c3932a703e5e499c1c5cb874458028abea-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <p>
        Counters also support displaying
        <em>
         both current and final values
        </em>
        out-of-box:
       </p>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#set heading</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">numbering</span><span style="color:var(--fg);">: </span><span style="color:#839496;">"</span><span style="color:#2aa198;">1.</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Introduction
</span><span style="color:var(--fg);">Some text here.
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">both</span><span style="color:var(--fg);">: </span><span style="color:#b58900;">true</span><span style="color:#657b83;">) </span><span style="color:#dc322f;">\
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">1 of 1</span><span style="color:#839496;">"</span><span style="color:var(--fg);">, </span><span style="color:#268bd2;">both</span><span style="color:var(--fg);">: </span><span style="color:#b58900;">true</span><span style="color:#657b83;">) </span><span style="color:#dc322f;">\
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">(
</span><span style="color:var(--fg);">  </span><span style="color:#657b83;">(</span><span style="color:var(--fg);">num, max</span><span style="color:#657b83;">) </span><span style="color:#859900;">=&gt; </span><span style="color:#657b83;">[</span><span style="color:#859900;">#</span><span style="color:#cb4b16;">num</span><span style="color:var(--fg);"> of </span><span style="color:#859900;">#</span><span style="color:#cb4b16;">max</span><span style="color:#657b83;">]</span><span style="color:var(--fg);">,
</span><span style="color:var(--fg);">   </span><span style="color:#268bd2;">both</span><span style="color:var(--fg);">: </span><span style="color:#b58900;">true
</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Background
</span><span style="color:var(--fg);">The current value is: </span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">()</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/af9d0da905bbb2215461b07b39653ef3890ff11a364afe018dae4ce4216f4961-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <h2 id="step">
        <a class="header" href="#step">
         Step
        </a>
       </h2>
       <p>
        That's quite easy, for counters you can increment value using
        <code class="hljs">
         <span style="color:var(--fg);">
          step
         </span>
        </code>
        . It works the same way as
        <code class="hljs">
         <span style="color:var(--fg);">
          update
         </span>
        </code>
        .
       </p>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#set heading</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">numbering</span><span style="color:var(--fg);">: </span><span style="color:#839496;">"</span><span style="color:#2aa198;">1.</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Introduction
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">step</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">= </span><span style="color:#cb4b16;">Analysis
</span><span style="color:var(--fg);">Let's skip 3.1.
</span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">step</span><span style="color:#657b83;">(</span><span style="color:#268bd2;">level</span><span style="color:var(--fg);">: </span><span style="color:#6c71c4;">2</span><span style="color:#657b83;">)
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">== </span><span style="color:#cb4b16;">Analysis
</span><span style="color:var(--fg);">At </span><span style="color:#b58900;">#counter</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">heading</span><span style="color:#657b83;">)</span><span style="color:var(--fg);">.</span><span style="color:#859900;">display</span><span style="color:#657b83;">()</span><span style="color:var(--fg);">.</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/12446a2258e9862d8df8b6b250ff14efbb9c35da165a2a04e8c4aa12c9b68cdf-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
       <h2 id="you-can-use-counters-in-your-functions">
        <a class="header" href="#you-can-use-counters-in-your-functions">
         You can use counters in your functions:
        </a>
       </h2>
       <div style="margin-bottom: 0.5em">
        <pre style="margin: 0"><code class="language-typ hljs"><span style="color:#859900;">#let</span><span style="color:var(--fg);"> c </span><span style="color:#859900;">= counter</span><span style="color:#657b83;">(</span><span style="color:#839496;">"</span><span style="color:#2aa198;">theorem</span><span style="color:#839496;">"</span><span style="color:#657b83;">)
</span><span style="color:#859900;">#let theorem</span><span style="color:#657b83;">(</span><span style="color:var(--fg);">it</span><span style="color:#657b83;">) </span><span style="color:#859900;">= block</span><span style="color:#657b83;">[
</span><span style="color:var(--fg);">  </span><span style="color:#b58900;">#c.step</span><span style="color:#657b83;">()
</span><span style="color:var(--fg);">  </span><span style="font-weight:bold;color:var(--fg);">*Theorem </span><span style="font-weight:bold;color:#b58900;">#c.display</span><span style="font-weight:bold;color:#657b83;">()</span><span style="font-weight:bold;color:var(--fg);">:*
</span><span style="color:var(--fg);">  </span><span style="color:#859900;">#</span><span style="color:#cb4b16;">it
</span><span style="color:#657b83;">]
</span><span style="color:var(--fg);">
</span><span style="color:#b58900;">#theorem</span><span style="color:#657b83;">[</span><span style="color:#2aa198;">$</span><span style="color:#6c71c4;">1 </span><span style="color:#859900;">= </span><span style="color:#6c71c4;">1</span><span style="color:#2aa198;">$</span><span style="color:#657b83;">]
</span><span style="color:#b58900;">#theorem</span><span style="color:#657b83;">[</span><span style="color:#2aa198;">$</span><span style="color:#6c71c4;">2 </span><span style="color:#859900;">&lt; </span><span style="color:#6c71c4;">3</span><span style="color:#2aa198;">$</span><span style="color:#657b83;">]</span></code></pre>
        <div style="
                        text-align: center;
                        padding: 0.5em;
                        background: var(--quote-bg);
                        ">
         <img align="middle" alt="Rendered image" src="typst-img/0f178f614e49a7400d646926705364a92ca3d4d888423b2693f071f83ce09e7d-1.svg" style="
                        background: white;
                        max-width: 500pt;
                        width: 100%;
                    "/>
        </div>
       </div>
      </main>