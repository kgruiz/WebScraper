<main>
    <ul aria-label="Breadcrumbs" class="breadcrumbs">
     <li class="root">
      <a href="/docs">
       <img alt="Docs" height="16" src="/assets/icons/16-docs-dark.svg" width="16"/>
      </a>
     </li>
     <li aria-hidden="true">
      <img alt="" height="16" src="/assets/icons/16-arrow-right.svg" width="16"/>
     </li>
     <li>
      <a href="/docs/changelog/">
       Changelog
      </a>
     </li>
     <li aria-hidden="true">
      <img alt="" height="16" src="/assets/icons/16-arrow-right.svg" width="16"/>
     </li>
     <li>
      <a href="/docs/changelog/0.4.0/">
       0.4.0
      </a>
     </li>
    </ul>
    <h1>
     Version 0.4.0 (May 20, 2023)
    </h1>
    <h2 id="footnotes">
     Footnotes
    </h2>
    <ul>
     <li>
      Implemented support for footnotes
     </li>
     <li>
      The
      <a href="/docs/reference/model/footnote/" title="`footnote`">
       <code>
        footnote
       </code>
      </a>
      function inserts a footnote
     </li>
     <li>
      The
      <a href="/docs/reference/model/footnote/#definitions-entry">
       <code>
        footnote.entry
       </code>
      </a>
      function can be used to customize the footnote listing
     </li>
     <li>
      The
      <code>
       <span class="typ-str">
        "chicago-notes"
       </span>
      </code>
      <a href="/docs/reference/model/cite/#parameters-style">
       citation style
      </a>
      is now available
     </li>
    </ul>
    <h2 id="documentation">
     Documentation
    </h2>
    <ul>
     <li>
      Added a
      <a href="/docs/guides/guide-for-latex-users/">
       Guide for LaTeX users
      </a>
     </li>
     <li>
      Now shows default values for optional arguments
     </li>
     <li>
      Added richer outlines in "On this Page"
     </li>
     <li>
      Added initial support for search keywords: "Table of Contents" will now find the
      <a href="/docs/reference/model/outline/" title="outline">
       outline
      </a>
      function. Suggestions for more keywords are welcome!
     </li>
     <li>
      Fixed issue with search result ranking
     </li>
     <li>
      Fixed many more small issues
     </li>
    </ul>
    <h2 id="math">
     Math
    </h2>
    <ul>
     <li>
      <strong>
       Breaking change
      </strong>
      : Alignment points (
      <code>
       &amp;
      </code>
      ) in equations now alternate between left and right alignment
     </li>
     <li>
      Added support for writing roots with Unicode: For example,
      <code>
       <span class="typ-math-delim">
        $
       </span>
       <span class="typ-func">
        root
       </span>
       <span class="typ-punct">
        (
       </span>
       x+y
       <span class="typ-punct">
        )
       </span>
       <span class="typ-math-delim">
        $
       </span>
      </code>
      can now also be written as
      <code>
       <span class="typ-math-delim">
        $
       </span>
       <span class="typ-math-op">
        â
       </span>
       <span class="typ-punct">
        (
       </span>
       x+y
       <span class="typ-punct">
        )
       </span>
       <span class="typ-math-delim">
        $
       </span>
      </code>
     </li>
     <li>
      Fixed uneven vertical
      <a href="/docs/reference/math/attach/#functions-attach">
       <code>
        attachment
       </code>
      </a>
      alignment
     </li>
     <li>
      Fixed spacing on decorated elements (e.g., spacing around a
      <a href="/docs/reference/math/cancel/">
       canceled
      </a>
      operator)
     </li>
     <li>
      Fixed styling for stretchable symbols
     </li>
     <li>
      Added
      <code>
       tack.r.double
      </code>
      ,
      <code>
       tack.l.double
      </code>
      ,
      <code>
       dotless.i
      </code>
      and
      <code>
       dotless.j
      </code>
      <a href="/docs/reference/symbols/sym/">
       symbols
      </a>
     </li>
     <li>
      Fixed show rules on symbols (e.g.
      <code>
       <span class="typ-key">
        show
       </span>
       sym
       <span class="typ-punct">
        .
       </span>
       <span class="typ-func">
        tack
       </span>
       <span class="typ-punct">
        :
       </span>
       <span class="typ-key">
        set
       </span>
       <span class="typ-func">
        text
       </span>
       <span class="typ-punct">
        (
       </span>
       blue
       <span class="typ-punct">
        )
       </span>
      </code>
      )
     </li>
     <li>
      Fixed missing rename from
      <code>
       ast.op
      </code>
      to
      <code>
       ast
      </code>
      that should have been in the previous release
     </li>
    </ul>
    <h2 id="scripting">
     Scripting
    </h2>
    <ul>
     <li>
      Added function scopes: A function can now hold related definitions in its own scope, similar to a module. The new
      <a href="/docs/reference/foundations/assert/#definitions-eq">
       <code>
        assert.eq
       </code>
      </a>
      function, for instance, is part of the
      <a href="/docs/reference/foundations/assert/" title="`assert`">
       <code>
        assert
       </code>
      </a>
      function's scope. Note that function scopes are currently only available for built-in functions.
     </li>
     <li>
      Added
      <a href="/docs/reference/foundations/assert/#definitions-eq">
       <code>
        assert.eq
       </code>
      </a>
      and
      <a href="/docs/reference/foundations/assert/#definitions-ne">
       <code>
        assert.ne
       </code>
      </a>
      functions for simpler equality and inequality assertions with more helpful error messages
     </li>
     <li>
      Exposed
      <a href="/docs/reference/model/list/#definitions-item">
       list
      </a>
      ,
      <a href="/docs/reference/model/enum/#definitions-item">
       enum
      </a>
      , and
      <a href="/docs/reference/model/terms/#definitions-item">
       term list
      </a>
      items in their respective functions' scope
     </li>
     <li>
      The
      <code>
       at
      </code>
      methods on
      <a href="/docs/reference/foundations/str/#definitions-at">
       strings
      </a>
      ,
      <a href="/docs/reference/foundations/array/#definitions-at">
       arrays
      </a>
      ,
      <a href="/docs/reference/foundations/dictionary/#definitions-at">
       dictionaries
      </a>
      , and
      <a href="/docs/reference/foundations/content/#definitions-at">
       content
      </a>
      now support specifying a default value
     </li>
     <li>
      Added support for passing a function to
      <a href="/docs/reference/foundations/str/#definitions-replace">
       <code>
        replace
       </code>
      </a>
      that is called with each match.
     </li>
     <li>
      Fixed
      <a href="/docs/reference/foundations/str/#definitions-replace">
       replacement
      </a>
      strings: They are now inserted completely verbatim instead of supporting the previous (unintended) magic dollar syntax for capture groups
     </li>
     <li>
      Fixed bug with trailing placeholders in destructuring patterns
     </li>
     <li>
      Fixed bug with underscore in parameter destructuring
     </li>
     <li>
      Fixed crash with nested patterns and when hovering over an invalid pattern
     </li>
     <li>
      Better error messages when casting to an
      <a href="/docs/reference/foundations/int/">
       integer
      </a>
      or
      <a href="/docs/reference/foundations/float/">
       float
      </a>
      fails
     </li>
    </ul>
    <h2 id="text-and-layout">
     Text and Layout
    </h2>
    <ul>
     <li>
      Implemented sophisticated CJK punctuation adjustment
     </li>
     <li>
      Disabled
      <a href="/docs/reference/text/text/#parameters-overhang">
       overhang
      </a>
      for CJK punctuation
     </li>
     <li>
      Added basic translations for Traditional Chinese
     </li>
     <li>
      Fixed
      <a href="/docs/reference/text/raw/#parameters-align">
       alignment
      </a>
      of text inside raw blocks (centering a raw block, e.g. through a figure, will now keep the text itself left-aligned)
     </li>
     <li>
      Added support for passing a array instead of a function to configure table cell
      <a href="/docs/reference/model/table/#parameters-align">
       alignment
      </a>
      and
      <a href="/docs/reference/model/table/#parameters-fill">
       fill
      </a>
      per column
     </li>
     <li>
      Fixed automatic figure
      <a href="/docs/reference/model/figure/#parameters-kind">
       <code>
        kind
       </code>
      </a>
      detection
     </li>
     <li>
      Made alignment of
      <a href="/docs/reference/model/enum/#parameters-number-align">
       enum numbers
      </a>
      configurable, defaulting to
      <code>
       end
      </code>
     </li>
     <li>
      Figures can now be made breakable with a show-set rule for blocks in figure
     </li>
     <li>
      Initial fix for smart quotes in RTL languages
     </li>
    </ul>
    <h2 id="export">
     Export
    </h2>
    <ul>
     <li>
      Fixed ligatures in PDF export: They are now copyable and searchable
     </li>
     <li>
      Exported PDFs now embed ICC profiles for images that have them
     </li>
     <li>
      Fixed export of strokes with zero thickness
     </li>
    </ul>
    <h2 id="web-app">
     Web app
    </h2>
    <ul>
     <li>
      Projects can now contain folders
     </li>
     <li>
      Added upload by drag-and-drop into the file panel
     </li>
     <li>
      Files from the file panel can now be dragged into the editor to insert them into a Typst file
     </li>
     <li>
      You can now copy-paste images and other files from your computer directly into the editor
     </li>
     <li>
      Added a button to resend confirmation email
     </li>
     <li>
      Added an option to invert preview colors in dark mode
     </li>
     <li>
      Added tips to the loading screen and the Help menu. Feel free to propose more!
     </li>
     <li>
      Added syntax highlighting for YAML files
     </li>
     <li>
      Allowed middle mouse button click on many buttons to navigate into a new tab
     </li>
     <li>
      Allowed more project names
     </li>
     <li>
      Fixed overridden Vim mode keybindings
     </li>
     <li>
      Fixed many bugs regarding file upload and more
     </li>
    </ul>
    <h2 id="miscellaneous-improvements">
     Miscellaneous Improvements
    </h2>
    <ul>
     <li>
      Improved performance of counters, state, and queries
     </li>
     <li>
      Improved incremental parsing for more efficient recompilations
     </li>
     <li>
      Added support for
      <code>
       .yaml
      </code>
      extension in addition to
      <code>
       .yml
      </code>
      for bibliographies
     </li>
     <li>
      The CLI now emits escape codes only if the output is a TTY
     </li>
     <li>
      For users of the
      <code>
       typst
      </code>
      crate: The
      <code>
       Document
      </code>
      is now
      <code>
       Sync
      </code>
      again and the
      <code>
       World
      </code>
      doesn't have to be
      <code>
       'static
      </code>
      anymore
     </li>
    </ul>
    <h2 id="contributors">
     Contributors
    </h2>
    Thanks to everyone who contributed to this release!
    <ul class="contribs">
     <li>
      <a href="https://github.com/Leedehai" target="_blank">
       <img alt="GitHub avatar of Leedehai" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/18319900?s=64&amp;v=4" title="@Leedehai made 8 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/PgBiel" target="_blank">
       <img alt="GitHub avatar of PgBiel" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/9021226?s=64&amp;v=4" title="@PgBiel made 7 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/Marmare314" target="_blank">
       <img alt="GitHub avatar of Marmare314" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/49279081?s=64&amp;v=4" title="@Marmare314 made 3 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/SUPERCILEX" target="_blank">
       <img alt="GitHub avatar of SUPERCILEX" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/9490724?s=64&amp;v=4" title="@SUPERCILEX made 2 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/peng1999" target="_blank">
       <img alt="GitHub avatar of peng1999" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/12483662?s=64&amp;v=4" title="@peng1999 made 2 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/sitandr" target="_blank">
       <img alt="GitHub avatar of sitandr" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/60141933?s=64&amp;v=4" title="@sitandr made 2 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/stevenskevin" target="_blank">
       <img alt="GitHub avatar of stevenskevin" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/48657161?s=64&amp;v=4" title="@stevenskevin made 2 contributions" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/AlistairKeiller" target="_blank">
       <img alt="GitHub avatar of AlistairKeiller" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/43255248?s=64&amp;v=4" title="@AlistairKeiller made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/HarmoGlace" target="_blank">
       <img alt="GitHub avatar of HarmoGlace" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/23212967?s=64&amp;v=4" title="@HarmoGlace made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/LaurenzV" target="_blank">
       <img alt="GitHub avatar of LaurenzV" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/47084093?s=64&amp;v=4" title="@LaurenzV made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/MultisampledNight" target="_blank">
       <img alt="GitHub avatar of MultisampledNight" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/80128916?s=64&amp;v=4" title="@MultisampledNight made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/albertothedev" target="_blank">
       <img alt="GitHub avatar of albertothedev" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/46131317?s=64&amp;v=4" title="@albertothedev made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/dvdvgt" target="_blank">
       <img alt="GitHub avatar of dvdvgt" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/40773635?s=64&amp;v=4" title="@dvdvgt made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/emme1444" target="_blank">
       <img alt="GitHub avatar of emme1444" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/23585909?s=64&amp;v=4" title="@emme1444 made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/goggle" target="_blank">
       <img alt="GitHub avatar of goggle" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/1856425?s=64&amp;v=4" title="@goggle made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/jannisko" target="_blank">
       <img alt="GitHub avatar of jannisko" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/40455076?s=64&amp;v=4" title="@jannisko made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/jassler" target="_blank">
       <img alt="GitHub avatar of jassler" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/24298790?s=64&amp;v=4" title="@jassler made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/johannes-wolf" target="_blank">
       <img alt="GitHub avatar of johannes-wolf" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/519002?s=64&amp;v=4" title="@johannes-wolf made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/liferooter" target="_blank">
       <img alt="GitHub avatar of liferooter" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/54807745?s=64&amp;v=4" title="@liferooter made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/maciemesser" target="_blank">
       <img alt="GitHub avatar of maciemesser" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/34891249?s=64&amp;v=4" title="@maciemesser made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/mattfbacon" target="_blank">
       <img alt="GitHub avatar of mattfbacon" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/58113890?s=64&amp;v=4" title="@mattfbacon made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/maxwell-thum" target="_blank">
       <img alt="GitHub avatar of maxwell-thum" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/119913396?s=64&amp;v=4" title="@maxwell-thum made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/maybechris" target="_blank">
       <img alt="GitHub avatar of maybechris" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/103339277?s=64&amp;v=4" title="@maybechris made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/michidk" target="_blank">
       <img alt="GitHub avatar of michidk" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/3979930?s=64&amp;v=4" title="@michidk made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/naim94a" target="_blank">
       <img alt="GitHub avatar of naim94a" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/227396?s=64&amp;v=4" title="@naim94a made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/owiecc" target="_blank">
       <img alt="GitHub avatar of owiecc" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/6896639?s=64&amp;v=4" title="@owiecc made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/pan93412" target="_blank">
       <img alt="GitHub avatar of pan93412" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/28441561?s=64&amp;v=4" title="@pan93412 made 1 contribution" width="64"/>
      </a>
     </li>
     <li>
      <a href="https://github.com/szdytom" target="_blank">
       <img alt="GitHub avatar of szdytom" crossorigin="anonymous" height="64" src="https://avatars.githubusercontent.com/u/33175397?s=64&amp;v=4" title="@szdytom made 1 contribution" width="64"/>
      </a>
     </li>
    </ul>
    <div class="page-end-buttons">
     <a class="previous" href="/docs/changelog/0.5.0/">
      <img alt="â" src="/assets/icons/16-arrow-right.svg"/>
      <div>
       <span class="page-title">
        0.5.0
       </span>
       <span class="hint">
        Previous page
       </span>
      </div>
     </a>
     <a class="next" href="/docs/changelog/0.3.0/">
      <img alt="â" src="/assets/icons/16-arrow-right.svg"/>
      <div>
       <span class="page-title">
        0.3.0
       </span>
       <span class="hint">
        Next page
       </span>
      </div>
     </a>
    </div>
   </main>