\title{typst.app/universe/package/blinky}

\phantomsection\label{banner}
\section{blinky}\label{blinky}

{ 0.1.0 }

Typesets paper titles in bibliographies as hyperlinks.

\phantomsection\label{readme}
This package permits the creation of Typst bibliographies in which paper
titles are typeset as hyperlinks. Hereâ€™s an example (with links
typeset in blue):

\includegraphics[width=0.8\linewidth,height=\textheight,keepaspectratio]{https://raw.githubusercontent.com/alexanderkoller/typst-blinky/main/examples/screenshot.png}

The bibliography is generated from a Bibtex file, and citations are done
with the usual Typst mechanisms. The hyperlinks are specified through
DOI or URL fields in the Bibtex entries; if such a field is present, the
title of the entry will be automatically typeset as a hyperlink.

See
\href{https://github.com/alexanderkoller/typst-blinky/tree/main/examples}{here}
for a full example.

\subsection{Usage}\label{usage}

Adding hyperlinks to your bibliography is a two-step process: (a) use a
CSL style with magic symbols (explained below), and (b) enclose the
\texttt{\ bibliography\ } command with the \texttt{\ link-bib-urls\ }
function:

\begin{verbatim}
#import "@preview/blinky:0.1.0": link-bib-urls

... @cite something ... @cite more ...

#let bibsrc = read("custom.bib")
#link-bib-urls(bibsrc)[
  #bibliography("custom.bib", style: "./association-for-computational-linguistics-blinky.csl")
]
\end{verbatim}

Observe that the Bibtex file \texttt{\ custom.bib\ } is loaded twice:
once to load into \texttt{\ link-bib-urls\ } and once in the standard
Typst \texttt{\ bibliography\ } command. Obviously, this needs to be the
same file twice. See under â€œAlternative solutionsâ€? below why this
canâ€™t be simplified further at the moment.

If a Bibtex entry contains a DOI field, the title will become a
hyperlink to the DOI. Otherwise, if the Bibtex entry contains a URL
field, the title will become a hyperlink to this URL. Otherwise, the
title will be shown as normal, without a link.

\subsection{CSL with magic symbols}\label{csl-with-magic-symbols}

Blinky generates the hyperlinked titles through a regex show rule that
replaces a â€œmagic symbolâ€? with a
\href{https://typst.app/docs/reference/model/link/}{link} command. This
â€œmagic symbolâ€? is a string of the form
\texttt{\ !!BIBENTRY!\textless{}key\textgreater{}!!\ } , where
\texttt{\ \textless{}key\textgreater{}\ } is the Bibtex citation key of
the reference.

You will therefore need to tweak your CSL style to use it with Blinky.
Specifically, in every place where you would usually have the paper
title, i.e.

\begin{verbatim}
\end{verbatim}

or similar, your CSL file now instead needs to print a decorated version
of the paperâ€™s citation-key (= Bibtex key):

\begin{verbatim}
\end{verbatim}

You can have more prefix before and suffix after the
\texttt{\ !!BIBENTRY!\ } and \texttt{\ !!\ } , as in the example, but
these magic symbols need to be there so Blinky can find the places in
the document where the hyperlinked title needs to be inserted.

You can check the
\href{https://github.com/alexanderkoller/typst-blinky/blob/main/examples/association-for-computational-linguistics-blinky.csl}{example
CSL file} to see what this looks like in practice; compare to
\href{https://github.com/citation-style-language/styles/blob/master/association-for-computational-linguistics.csl}{the
unmodified original} .

\subsection{Alternative solutions}\label{alternative-solutions}

The current mechanism in Blinky is somewhat heavy-handed: a Typst plugin
uses the \href{https://github.com/typst/biblatex}{biblatex} crate to
parse the Bibtex file (independently of the normal operations of the
\texttt{\ bibliography\ } command), and then all occurrences of the
magic symbol in the Typst bibliography are replaced by the hyperlinked
titles.

It would be great to replace this mechanism by something simpler, but it
is actually remarkably tricky to make bibliography titles hyperlinks
with the current version of Typst (0.11.1). All the alternatives that I
could think of donâ€™t work. Here are some of them:

\begin{itemize}
\tightlist
\item
  Print the URL/DOI using the CSL style, and then use a regex show rule
  to convert it into a \texttt{\ link\ } around the title somehow. This
  does not work because most URLs contain a colon character (:), and
  these \href{https://github.com/typst/typst/issues/86}{cause trouble
  with Typst regexes} .
\item
  Make the CSL style output text of the form
  \texttt{\ \#link(url){[}title{]}\ } . This does not work because the
  content generated by CSL is not evaluated further by Typst. Also,
  Typst \href{https://github.com/typst/typst/issues/942}{does not
  support show rules for the individual bibliography items} , which
  makes it tricky to call
  \href{https://typst.app/docs/reference/foundations/eval/}{eval} on
  them.
\item
  Create a show rule for \texttt{\ link\ } . Some CSL styles already
  generate \texttt{\ link\ } elements if a URL/DOI is present in the bib
  entry - one could consider replacing it with a \texttt{\ link\ } whose
  URL is the same as before, but the text is a link symbol or some such.
  However, a show rule for a link that generates another link runs into
  an infinite recursion; Typst made
  \href{https://github.com/typst/typst/pull/3327}{the deliberate
  decision} to handle such recursions only for \texttt{\ text\ } show
  rules.
\item
  The best solution would be to simply use an unmodified CSL file, but
  it is not clear to me how one would pick out the paper title from the
  bibliography in a general way. Iâ€™m afraid that any solution that
  hyperlinks titles will require modifications to the CSL style.
\end{itemize}

It would furthermore be desirable to hide the fact that we are reading
the same Bibtex file twice behind a single function call. However, code
in a Typst package
\href{https://github.com/typst/typst/issues/2126}{resolves all filenames
relative to the package directory} , which means that the package cannot
access a bibliography file outside of the package directory. We may be
able to simplify this once
\href{https://github.com/typst/typst/issues/971}{\#971} gets addressed.

\subsubsection{How to add}\label{how-to-add}

Copy this into your project and use the import as \texttt{\ blinky\ }

\begin{verbatim}
#import "@preview/blinky:0.1.0"
\end{verbatim}

\includesvg[width=0.16667in,height=0.16667in]{/assets/icons/16-copy.svg}

Check the docs for
\href{https://typst.app/docs/reference/scripting/\#packages}{more
information on how to import packages} .

\subsubsection{About}\label{about}

\begin{description}
\tightlist
\item[Author :]
\href{mailto:akoller@gmail.com}{Alexander Koller}
\item[License:]
MIT
\item[Current version:]
0.1.0
\item[Last updated:]
August 7, 2024
\item[First released:]
August 7, 2024
\item[Archive size:]
75.1 kB
\href{https://packages.typst.org/preview/blinky-0.1.0.tar.gz}{\pandocbounded{\includesvg[keepaspectratio]{/assets/icons/16-download.svg}}}
\item[Repository:]
\href{https://github.com/alexanderkoller/typst-blinky}{GitHub}
\end{description}

\subsubsection{Where to report issues?}\label{where-to-report-issues}

This package is a project of Alexander Koller . Report issues on
\href{https://github.com/alexanderkoller/typst-blinky}{their repository}
. You can also try to ask for help with this package on the
\href{https://forum.typst.app}{Forum} .

Please report this package to the Typst team using the
\href{https://typst.app/contact}{contact form} if you believe it is a
safety hazard or infringes upon your rights.

\phantomsection\label{versions}
\subsubsection{Version history}\label{version-history}

\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Version & Release Date \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0.1.0 & August 7, 2024 \\
\end{longtable}

Typst GmbH did not create this package and cannot guarantee correct
functionality of this package or compatibility with any version of the
Typst compiler or app.
