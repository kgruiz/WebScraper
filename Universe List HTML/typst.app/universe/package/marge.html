<main>
    <div id="banner" style="--banner-accent:#000000;--banner-primary:#000000;--banner-secondary:#000000;--banner-tertiary:#565565;--banner-background:#eff0f3">
     <div class="package-icon" role="img">
     </div>
     <div>
      <div class="title">
       <h1 class="name">
        marge
       </h1>
       <span class="version">
        0.1.0
       </span>
      </div>
      <p class="description">
       Easy-to-use but powerful and smart margin notes.
      </p>
     </div>
    </div>
    <div class="inner-grid">
     <section id="readme">
      <p>
       A package for easy-to-use but powerful and smart margin notes.
      </p>
      <h2>
       Usage
      </h2>
      <p>
       The main function provided by this package is
       <code>
        sidenote
       </code>
       , which allows you to create margin notes. The function takes a single positional argument (the text of the note) and several optional keyword arguments for customization:
      </p>
      <table>
       <thead>
        <tr>
         <th>
          Parameter
         </th>
         <th>
          Description
         </th>
         <th>
          Default
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td>
          <code>
           side
          </code>
         </td>
         <td>
          The margin where the note should be placed.
         </td>
         <td>
          <code>
           auto
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           dy
          </code>
         </td>
         <td>
          The custom offset by which the note should be moved along the y-axis.
         </td>
         <td>
          <code>
           0pt
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           padding
          </code>
         </td>
         <td>
          The space between the note and the page or content border.
         </td>
         <td>
          <code>
           2em
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           gap
          </code>
         </td>
         <td>
          The minimum gap between this and neighboring notes.
         </td>
         <td>
          <code>
           0.4em
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           numbering
          </code>
         </td>
         <td>
          How the note should be numbered.
         </td>
         <td>
          <code>
           none
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           counter
          </code>
         </td>
         <td>
          The counter to use for numbering.
         </td>
         <td>
          <code>
           counter("sidenote")
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           format
          </code>
         </td>
         <td>
          The âshow ruleâ for the note.
         </td>
         <td>
          <code>
           it =&gt; it.default
          </code>
         </td>
        </tr>
       </tbody>
      </table>
      <p>
       The parameters allow maximum flexibility and often allow values of different types:
      </p>
      <ul>
       <li>
        The
        <code>
         side
        </code>
        parameter can be set to
        <code>
         auto
        </code>
        ,
        <code>
         "inside"
        </code>
        ,
        <code>
         "outside"
        </code>
        or any horizontal
        <code>
         alignment
        </code>
        value. If set to
        <code>
         auto
        </code>
        , the note is placed on the larger of the two margins. If they are equally large, it is placed on the
        <code>
         "outside"
        </code>
        margin.
       </li>
       <li>
        If the
        <code>
         dy
        </code>
        parameter has a relative part, it is resolved relative to the height of the note.
       </li>
       <li>
        The
        <code>
         padding
        </code>
        parameter can be set either to a single length value or a dictionary. If a dictionary is used, the keys can be any horizontal alignment value, as well as
        <code>
         inside
        </code>
        and
        <code>
         outside
        </code>
        .
       </li>
       <li>
        With the
        <code>
         counter
        </code>
        parameter, you can for example combine the numbering of footnotes and sidenotes.
       </li>
      </ul>
      <p>
       An especially useful feature is the
       <code>
        format
       </code>
       parameter, as it emulates the behavior of a show rule via a function. That function is called with the context of the note and receives a dictionary with the following keys:
      </p>
      <table>
       <thead>
        <tr>
         <th>
          Key
         </th>
         <th>
          Description
         </th>
         <th>
          Value or type
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td>
          <code>
           side
          </code>
         </td>
         <td>
          The side of the page the note is placed on.
         </td>
         <td>
          <code>
           left
          </code>
          or
          <code>
           right
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           numbering
          </code>
         </td>
         <td>
          The numbering of the note.
         </td>
         <td>
          <code>
           str
          </code>
          ,
          <code>
           function
          </code>
          or
          <code>
           none
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           counter
          </code>
         </td>
         <td>
          The counter used for numbering the note.
         </td>
         <td>
          <code>
           counter
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           padding
          </code>
         </td>
         <td>
          The padding of the note, resolved to
          <code>
           left
          </code>
          and
          <code>
           right
          </code>
          .
         </td>
         <td>
          <code>
           dictionary
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           margin
          </code>
         </td>
         <td>
          The size of the margin, which the note is placed on.
         </td>
         <td>
          <code>
           length
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           source
          </code>
         </td>
         <td>
          The location in the document where the note is defined.
         </td>
         <td>
          <code>
           location
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           body
          </code>
         </td>
         <td>
          The content of the note.
         </td>
         <td>
          <code>
           str
          </code>
         </td>
        </tr>
        <tr>
         <td>
          <code>
           default
          </code>
         </td>
         <td>
          The default look of the note.
         </td>
         <td>
          <code>
           content
          </code>
         </td>
        </tr>
       </tbody>
      </table>
      <p>
       As the dictionary itself is not an element, you cannot directly use it within the
       <code>
        format
       </code>
       function as you would be able to in a normal show rule. To still be able to build upon the default look of the note without having to reconstruct it, the
       <code>
        default
       </code>
       key is provided. The default style sets the font size to
       <code>
        0.85em
       </code>
       and the paragraphâs leading to
       <code>
        0.5em
       </code>
       , matching the default style of footnotes. This can of course be overridden.
      </p>
      <p>
       Aside from the customizability, the package also provides automatic overlap and overflow protection. If a note would overlap with another note, it is moved further down the page, so that the
       <code>
        gap
       </code>
       parameters of both notes are respected. If a note would overflow the page, it is moved upwards, so that the bottom of the note is aligned with the bottom of the page content. Any previous notes, which would then overlap with the moved note, are also moved accordingly.
      </p>
      <h3>
       Note about pages with automatic width
      </h3>
      <p>
       If a note is placed in the right margin of a page with width set to
       <code>
        auto
       </code>
       , additional configuration is necessary. As the final width of the page is not known when the note is placed, the noteâs position cannot be calculated. To place notes on the right margin of such pages, the package provides a
       <code>
        container
       </code>
       , which is supposed to be included in the pageâs
       <code>
        background
       </code>
       or
       <code>
        foreground
       </code>
       :
      </p>
      <pre><code class="language-typ"><code><span class="typ-key">#</span><span class="typ-key">import</span> <span class="typ-str">"@preview/marge:0.1.0"</span><span class="typ-punct">:</span> sidenote<span class="typ-punct">,</span> container

<span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">page</span><span class="typ-punct">(</span>width<span class="typ-punct">:</span> <span class="typ-key">auto</span><span class="typ-punct">,</span> background<span class="typ-punct">:</span> container<span class="typ-punct">)</span>

<span class="typ-escape">...</span>
</code></code></pre>
      <p>
       The use of the
       <code>
        container
       </code>
       variable is detected automatically by the package, so that an error can be raised when it is required but not set.
      </p>
      <h3>
       Note about layout convergence and performance
      </h3>
      <p>
       This package makes heavy use of states and contextual blocks, causing Typst to require multiple layout passes to fully resolve the final layout. Usually, the limit imposed by Typst is sufficient, but I cannot guarantee that this will remain true for large documents with a lot of notes. If you happen to run into this limit, you can try using the
       <code>
        container
       </code>
       variable as mentioned above, as it can reduce the number of layout passes required.
      </p>
      <p>
       As each layout iteration adds to the total compile time, the use of the
       <code>
        container
       </code>
       can also be beneficial for performance reasons. Another performance tip is to keep the size of paragraphs containing margin notes small, as the line breaking algorithm cannot be memoized when the paragraph contains a note.
      </p>
      <h3>
       Note about how lengths are resolved
      </h3>
      <p>
       When a length is given in a context-dependent way (i.e. in
       <code>
        em
       </code>
       units), it is resolved relative to the font size of the
       <em>
        content
       </em>
       , not the font size of the note (which is smaller by default). This has the unfortunate side effect that a gap set to
       <code>
        0pt
       </code>
       will still have some space due to the content paragraphâs leading (which is also larger than default leading of the note). Similarly, if notes are defined in a context with a larger font size, the padding and gap values may unexpectedly be larger than of neighboring notes.
      </p>
      <h2>
       Example
      </h2>
      <pre><code class="language-typ"><code><span class="typ-key">#</span><span class="typ-key">import</span> <span class="typ-str">"@preview/marge:0.1.0"</span><span class="typ-punct">:</span> sidenote

<span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">page</span><span class="typ-punct">(</span>margin<span class="typ-punct">:</span> <span class="typ-punct">(</span>right<span class="typ-punct">:</span> <span class="typ-num">5cm</span><span class="typ-punct">)</span><span class="typ-punct">)</span>
<span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">par</span><span class="typ-punct">(</span>justify<span class="typ-punct">:</span> <span class="typ-key">true</span><span class="typ-punct">)</span>

<span class="typ-key">#</span><span class="typ-key">let</span> sidenote <span class="typ-op">=</span> sidenote<span class="typ-punct">.</span><span class="typ-func">with</span><span class="typ-punct">(</span>numbering<span class="typ-punct">:</span> <span class="typ-str">"1"</span><span class="typ-punct">,</span> padding<span class="typ-punct">:</span> <span class="typ-num">1em</span><span class="typ-punct">)</span>

The Simpsons is an iconic animated series that began in 1989
<span class="typ-func">#</span><span class="typ-func">sidenote</span><span class="typ-punct">[</span>The show holds the record for the most episodes of any
American sitcom.<span class="typ-punct">]</span>. The show features the Simpson family: Homer,
Marge, Bart, Lisa, and Maggie. 

Bart is the rebellious son who often gets into trouble, and Lisa
is the intelligent and talented daughter <span class="typ-func">#</span><span class="typ-func">sidenote</span><span class="typ-punct">[</span>Lisa is known
for her saxophone playing and academic achievements.<span class="typ-punct">]</span>. Baby
Maggie, though silent, has had moments of surprising brilliance
<span class="typ-func">#</span><span class="typ-func">sidenote</span><span class="typ-punct">[</span>Maggie once shot Mr. Burns in a dramatic plot twist.<span class="typ-punct">]</span>.
</code></code></pre>
      <p>
       <img alt="Result of example code." src="https://github.com/typst/packages/raw/main/packages/preview/marge/0.1.0/assets/example.svg"/>
      </p>
     </section>
     <aside>
      <section>
       <h3>
        How to add
       </h3>
       <p>
        Copy this into your project and use the import as
        <!-- -->
        <code>
         marge
        </code>
       </p>
       <div class="import-snippet">
        <pre><code><span class="typ-key">#</span><span class="typ-key">import</span> <span class="typ-str">"@preview/marge:0.1.0"</span></code></pre>
        <button class="copy" title="Copy to clipboard">
         <img alt="Copy" height="16" src="/assets/icons/16-copy.svg" width="16"/>
        </button>
       </div>
       <p class="muted">
        Check the docs for
        <!-- -->
        <a href="https://typst.app/docs/reference/scripting/#packages">
         more information on how to import packages
        </a>
        .
       </p>
      </section>
      <section id="about">
       <h3>
        About
       </h3>
       <dl>
        <dt>
         Author
         <!-- -->
         :
        </dt>
        <dd>
         Eric Biedert
        </dd>
        <dt>
         License:
        </dt>
        <dd>
         MIT
        </dd>
        <dt>
         Current version:
        </dt>
        <dd>
         0.1.0
        </dd>
        <dt>
         Last updated:
        </dt>
        <dd>
         November 19, 2024
        </dd>
        <dt>
         First released:
        </dt>
        <dd>
         November 19, 2024
        </dd>
        <dt>
         Minimum Typst version:
        </dt>
        <dd>
         0.11.0
        </dd>
        <dt>
         Archive size:
        </dt>
        <dd class="archive-size-value">
         7.98 kB
         <a href="https://packages.typst.org/preview/marge-0.1.0.tar.gz">
          <img alt="Size icon" src="/assets/icons/16-download.svg"/>
         </a>
        </dd>
        <dt>
         Repository:
        </dt>
        <dd>
         <a href="https://github.com/EpicEricEE/typst-marge" rel="noopener noreferrer" target="_blank">
          GitHub
         </a>
        </dd>
        <dt>
         Categor
         <!-- -->
         ies
         <!-- -->
         :
        </dt>
        <dd>
         <ul class="list-with-icons">
          <li>
           <img alt="Components icon" src="/assets/icons/16-package.svg"/>
           <a href="https://typst.app/universe/search/?category=components">
            Components
           </a>
          </li>
          <li>
           <img alt="Model icon" src="/assets/icons/16-list-unordered.svg"/>
           <a href="https://typst.app/universe/search/?category=model">
            Model
           </a>
          </li>
          <li>
           <img alt="Layout icon" src="/assets/icons/16-layout.svg"/>
           <a href="https://typst.app/universe/search/?category=layout">
            Layout
           </a>
          </li>
         </ul>
        </dd>
       </dl>
      </section>
      <section>
       <h3>
        Where to report issues?
       </h3>
       <p>
        This
        <!-- -->
        package
        <!-- -->
        is a project of
        <!-- -->
        <!-- -->
        Eric Biedert
        <!-- -->
        .
        <!-- -->
        <!-- -->
        Report issues on
        <!-- -->
        <a href="https://github.com/EpicEricEE/typst-marge" rel="noopener noreferrer" target="_blank">
         their repository
        </a>
        .
        <!-- -->
        <!-- -->
        You can also try to ask for help with this
        <!-- -->
        package
        <!-- -->
        on the
        <!-- -->
        <a href="https://forum.typst.app" rel="noopener" target="_blank">
         Forum
        </a>
        .
       </p>
       <p>
        Please report this
        <!-- -->
        package
        <!-- -->
        to the Typst team using the
        <!-- -->
        <a href="https://typst.app/contact" rel="noreferrer" target="_blank">
         contact form
        </a>
        <!-- -->
        if you believe it is a safety hazard or infringes upon your rights.
       </p>
      </section>
      <section id="versions">
       <h3>
        Version history
       </h3>
       <table>
        <thead>
         <tr>
          <th align="left">
           Version
          </th>
          <th align="left">
           Release Date
          </th>
         </tr>
        </thead>
        <tbody>
         <tr>
          <td align="left">
           0.1.0
          </td>
          <td align="left">
           November 19, 2024
          </td>
         </tr>
        </tbody>
       </table>
      </section>
      <p class="bottom-notice muted">
       Typst GmbH did not create this
       <!-- -->
       package
       <!-- -->
       and cannot guarantee correct functionality of this
       <!-- -->
       package
       <!-- -->
       or compatibility with any version of the Typst compiler or app.
      </p>
     </aside>
    </div>
   </main>